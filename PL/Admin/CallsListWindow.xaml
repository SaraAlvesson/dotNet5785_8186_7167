<Window x:Class="PL.Admin.CallsListWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Manage Calls" Height="600" Width="900" 
        DataContext="{Binding RelativeSource={RelativeSource Self}}" 
        Loaded="Window_Loaded" Closed="Window_Closed">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- סינון ומיון -->
        <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="0,0,0,10">
            <TextBlock Text="Filter by:" VerticalAlignment="Center" Margin="0,0,5,0" />
            <ComboBox Width="150" SelectedItem="{Binding SelectedCallField}" Margin="0,0,10,0">
                <ComboBoxItem Content="Call Id" Tag="CallId" />
                <ComboBoxItem Content="Call Type" Tag="CallType" />
                <ComboBoxItem Content="Status" Tag="Status" />
            </ComboBox>
        </StackPanel>

        <!-- רשימת הקריאות -->
        <ListView Grid.Row="1" Margin="0,10,0,10" ItemsSource="{Binding FilteredCalls}" 
                  SelectedItem="{Binding SelectedCall}" MouseDoubleClick="lsvCallList_MouseDoubleClick">
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="Id" DisplayMemberBinding="{Binding Id}" Width="70" />
                    <GridViewColumn Header="Call Id" DisplayMemberBinding="{Binding CallId}" Width="70" />
                    <GridViewColumn Header="Call Type" DisplayMemberBinding="{Binding CallType}" Width="100" />
                    <GridViewColumn Header="Open Time" DisplayMemberBinding="{Binding OpenTime}" Width="150" />
                    <GridViewColumn Header="Time Until Finish" DisplayMemberBinding="{Binding SumTimeUntilFinish}" Width="150" />
                    <GridViewColumn Header="Last assignment Volunteer Name" DisplayMemberBinding="{Binding LastVolunteerName}" Width="150" />
                    <GridViewColumn Header="Sum Appointment Time" DisplayMemberBinding="{Binding SumAppointmentTime}" Width="150" />
                    <GridViewColumn Header="Total Assignments" DisplayMemberBinding="{Binding SumAssignment}" Width="150" />
                    <GridViewColumn Header="Status" DisplayMemberBinding="{Binding Status}" Width="100" />
                </GridView>
            </ListView.View>
        </ListView>

        <!-- כפתור הוספה -->
        <Button Grid.Row="2" Content="Add Call" HorizontalAlignment="Center" Width="150" Height="40"
                Click="ButtonAdd_Click" Background="#4CAF50" Foreground="White" FontWeight="Bold" BorderThickness="0" />
    </Grid>
</Window>
